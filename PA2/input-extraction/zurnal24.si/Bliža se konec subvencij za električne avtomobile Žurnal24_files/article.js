function storeArticle(){$(".js_storeArticle").click((function(e){e.preventDefault();var t=$(this),n=t.data("action"),i=t.attr("href"),o=t.data("delete-url");"store"===n?$.ajax({type:"POST",url:i,data:{app_model:t.data("app"),pk:t.data("pk"),csrfmiddlewaretoken:t.data("csrf")},success:function(e){t.data("action","remove"),t.html("Remove article")},error:function(e){}}):"remove"==n&&$.ajax({type:"DELETE",url:o,beforeSend:function(e){e.setRequestHeader("X-CSRFToken",t.data("csrf"))},success:function(e){t.data("action","store"),t.text("Store article")},error:function(e){}})}))}function sendCorrection(){$(".js_submitCorrection").click((function(e){e.preventDefault();var t=$(".js_modalMsg"),n=$(this).parent("form"),i=n.attr("action"),o=n.serializeArray();$.ajax({type:"POST",url:i,data:o,success:function(e){t.html('<div class="modal__message modal__message--success">Hvala.</span>'),setTimeout((function(){$(".js_modalClose").trigger("click")}),2e3)},error:function(e){t.html('<div class="modal__message modal__message--error">Dogodila se greška.</span>')}})}))}function initArticleCorrection(){$(".js_modalOpen").magnificPopup({type:"inline",midClick:!0})}function setModalClose(){$(".js_modalClose").on("click",(function(e){e.preventDefault(),$.magnificPopup.instance.close()}))}sendCorrection(),storeArticle(),$((function(){!function(){var e=window.location.hash;if(e){if(!$(e).length)return;$("html,body").animate({scrollTop:$(e).offset().top},300,"swing")}}();var e=window.location.pathname,t="Stranica komentara";function n(){$.each($("textarea[data-autoresize]"),(function(){var e=$(this),t=$(this).attr("maxlength"),n=e.closest(".onecomment").find(".js_textareaCount > span"),i=this.offsetHeight-this.clientHeight;e.on("keyup input",(function(o){var a;a=this,$(a).css("height","auto").css("height",a.scrollHeight+i),function(e){n.parent(".js_textareaCount").addClass("is_visible"),n.text(t-$(e).val().length)}(this),o.ctrlKey&&13==o.keyCode&&e.closest(".onecomment__form").find(".js_sendNewComment, .js_sendReplyComment").trigger("click")})),e.removeAttr("data-autoresize").addClass("js_initTextareaAutoResize")}))}function i(){$(".js_showReplyComment").each((function(){$(this).on("click",(function(e){!function(e,t){if(t.preventDefault(),e.hasClass("has_commentWindow"))return void $("html,body").animate({scrollTop:e.closest(".thread__item").find(".js_oneCommentReply").offset().top-$(window).height()/2},300,"swing");$(".js_cancelComment").trigger("click");var i=e.data("thread-id"),o=e.data("post-id"),a=e.data("comment-object"),l=$(".js_newComment").clone();l.removeClass("js_newComment").addClass("js_oneCommentReply").css({display:"none"}),l.find(".js_sendNewComment").removeClass("js_sendNewComment").addClass("js_sendReplyComment").attr({"data-thread-id":i,"data-post-id":o,"data-api":a}).text("Odgovori"),l.find(".js_commentText").attr({"data-autoresize":"",style:""}),l.find(".js_textareaCount").removeClass("is_visible"),e.addClass("has_commentWindow").closest(".thread__item").append(l),l.slideDown((function(){n()}));var c=l.find(".js_sendReplyComment"),r=l.find(".js_cancelComment");c.on("click",(function(e){s($(this),e)})),r.on("click",(function(t){t.preventDefault(),e.removeClass("has_commentWindow"),$(this).closest(".js_oneCommentReply").slideUp((function(){$(this).remove()}))}))}($(this),e)}))}))}function o(e,n){if(n.preventDefault(),!e.hasClass("btn--invert")){var i=e.closest(".onecomment__rating, .commbox__rating");$.ajax({type:"POST",url:e.data("api"),success:function(n){i.find(".js_like, .js_dislike").removeClass("btn--invert"),e.addClass("btn--invert"),i.find(".js_like .vote__value").text(n.plus),i.find(".js_dislike .vote__value").text(n.minus),i.find(".js_line").css({width:n.percentage+"%"}),dataLayer.push({event:"GAEvent",eventCategory:"Komentari",eventAction:"Dobar / Loš",eventLabel:t,eventValue:void 0})},statusCode:{201:function(){},403:function(){},408:function(){},500:function(){},502:function(){}}})}}function a(e,t){t.preventDefault(),$.ajax({type:"POST",url:e.data("api"),success:function(t){e.hasClass("js_profileUnfollow")?e.removeClass("is_visible").siblings(".js_profileFollow").addClass("is_visible"):e.removeClass("is_visible").siblings(".js_profileUnfollow").addClass("is_visible")},statusCode:{201:function(){},403:function(){},408:function(){},500:function(){},502:function(){}}})}function s(e,t){t.preventDefault();var n=e.data("thread-id"),i=e.data("post-id"),o=e.data("comment-object"),a=e.closest(".onecomment__form").find(".js_commentText"),s=e.closest(".js_oneCommentReply").siblings(".js_oneComment").attr("id"),l=$("#g-recaptcha-response").val(),r=$("#"+s).data("thread-url");if(0!==a.val().length){e.removeClass("btn--r").addClass("btn--disabled").css("pointer-events","none");var d={content:a.val(),comment_object:o,g_recaptcha_response:l};n&&(d.thread_id=n),i&&(d.post_id=i),$.ajax({type:"POST",url:e.data("api"),data:d,success:function(e){a.val("");e.message;var t=e.url;if(r){if(!$("#"+s).length)return;$("#"+s).closest(".thread__item").load(r,(function(){c(),$("#"+s).closest(".thread__item").find(".js_showReplyComment ").trigger("click"),$("body").hasClass("post_view")&&$(".post_view .js_oneCommentReply").show()}))}else setTimeout((function(){t?window.location.href=t:location.reload(),window.onhashchange=function(){location.reload()}}),600)},error:function(t,n,i){e.removeClass("btn--disabled").addClass("btn--r").css("pointer-events","auto");var o=$(".js_toaster");o.addClass("is_open"),o.find(".js_toasterText").text(t.responseJSON.message),setTimeout((function(){o.removeClass("is_open")}),3e3),$(".js_closeToaster").on("click",(function(){o.removeClass("is_open")}))},statusCode:{201:function(){},403:function(){},408:function(){},429:function(){},500:function(){},502:function(){}}})}}function l(e){if(!e.hasClass("js_bindEvents")){e.addClass("js_bindEvents");var n=e.find(".js_like"),i=e.find(".js_dislike"),s=e.find(".js_profileFollow"),l=e.find(".js_profileUnfollow"),c=e.find(".js_flagComment"),r=e.find(".js_deleteComment"),d=e.find(".js_showMoreComment"),f=e.find(".js_toggleSubcomment");n.on("click",(function(e){o($(this),e)})),i.on("click",(function(e){o($(this),e)})),s.on("click",(function(e){a($(this),e)})),l.on("click",(function(e){a($(this),e)})),c.on("click",(function(e){!function(e,n){n.preventDefault(),e.hasClass("btn--invert")||$.ajax({type:"POST",url:e.data("api"),success:function(n){e.addClass("btn--invert"),dataLayer.push({event:"GAEvent",eventCategory:"Komentari",eventAction:"Flagiranje",eventLabel:t,eventValue:void 0})},statusCode:{201:function(){},403:function(){},408:function(){},500:function(){},502:function(){}}})}($(this),e)})),r.on("click",(function(e){!function(e,n){n.preventDefault(),e.hasClass("btn--invert")||$.ajax({type:"POST",url:e.data("api"),success:function(n){e.addClass("btn--invert"),e.closest(".thread__item").addClass("thread__item--deleted").fadeIn().delay(1500).slideUp((function(){$(this).remove()})),dataLayer.push({event:"GAEvent",eventCategory:"Komentari",eventAction:"Flagiranje",eventLabel:t,eventValue:void 0})},statusCode:{201:function(){},403:function(){},408:function(){},500:function(){},502:function(){}}})}($(this),e)})),d.on("click",(function(e){!function(e,n){n.preventDefault(),e.closest(".onecomment__content, .onereply__content, .commbox__content").find(".js_onecommentContentHidden").removeClass("onecomment__content--hidden onereply__content--hidden commbox__post_content--hidden "),e.off().hide().siblings(".js_onecommentVisible").find(".commbox__hellip").hide(),dataLayer.push({event:"GAEvent",eventCategory:"Komentari",eventAction:"Prikaži još - tekst link",eventLabel:t,eventValue:void 0})}($(this),e)})),f.on("click",(function(e){!function(e,n){n.preventDefault(),e.siblings(".js_showReplyComment").hasClass("has_commentWindow")||e.siblings(".js_showReplyComment").trigger("click"),$subComment=e.closest(".thread__item").find(".thread__sublist"),e.toggleClass("is_active"),e.hasClass("is_active")?$subComment.addClass("is_visible"):($subComment.removeClass("is_visible"),e.closest(".thread__item").find(".js_cancelComment").trigger("click")),dataLayer.push({event:"GAEvent",eventCategory:"Komentari",eventAction:"Prikaži odgovore",eventLabel:t,eventValue:void 0})}($(this),e)}))}}function c(){i();var e=$(".js_oneComment"),n=$(".js_sendNewComment");$cancelComment=$(".js_cancelComment"),$toggleAllSubcomment=$(".js_toggleAllSubcomment"),n.hasClass("js_sendNewCommentInit")||(n.addClass("js_sendNewCommentInit"),n.on("click",(function(e){s($(this),e)}))),$cancelComment.on("click",(function(e){e.preventDefault(),$(this).closest(".onecomment__content").find(".js_commentText").val("")})),$toggleAllSubcomment.on("click",(function(e){e.preventDefault(),$(".js_toggleSubcomment").trigger("click"),dataLayer.push({event:"GAEvent",eventCategory:"Komentari",eventAction:"Prikaži sve odgovore",eventLabel:t,eventValue:void 0})})),e.each((function(){l($(this))}))}-1===e.indexOf("/komentari")&&(t="Članak"),c(),$(".js_selectWrap").each((function(){var e=$(this),t=e.find(".fake__form_select_btn"),n=e.find(".fake__form_select_list"),i=e.find(".fake__form_select_item"),o=e.find(".fake__form_select_box"),a=$(".js_selectedSection");if(e.addClass("js_selectWrapFN"),t.on("click",(function(){n.addClass("is_visible")})),n.on("mouseleave",(function(){n.removeClass("is_visible")})),i.on("click",(function(e){var i=$(this).html(),a=$(this).data("value");o.find('option[value="'+a+'"]'),n.removeClass("is_visible"),t.html(i),o.val(a),document.location.href=function(e,t,n){e.indexOf("#")&&(e=e.split("#")[0]);var i=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(i)?e.replace(i,"$1"+t+"="+n+"$2"):e+o+t+"="+n}(document.location.href,"order",a)})),a.html()){var s=o.find('option[value="'+a.html()+'"]');t.html(s.html())}})),n()})),setModalClose(),initArticleCorrection(),$((function(){$.fn.inView=function(){$(".detail_content");var e=$(window);obj=$(this);var t=e.scrollTop()+e.height()/4+250,n=e.scrollTop()+e.height()/4*2+250,i=obj.offset().top+obj.outerHeight();return n>=i&&t<=i};var e,t,n,i,o,a,s,l,c=function(e){return-1!=e.indexOf("vimeo")?"vimeo":-1!=e.indexOf("youtube")||-1!=e.indexOf("youtu.be")?"youtube":"CDN"};function r(e,t,n){""!==t&&t.preventDefault(),void 0===n&&(n=!1);var i=e;if(i.length){var o=i.data("href"),a=i.data("poster"),s=i.attr("id");switch(c(o)){case"vimeo":!function(e,t){f_width="100%",f_height="100%";var n=t.substr(t.lastIndexOf("/")+1);-1!==n.indexOf("id=")&&(n=t.substr(t.lastIndexOf("clip_id=")+8));var i=$('<iframe src="http://player.vimeo.com/video/'+n+'?color=00adef&portrait=0&badge=0"        width="'+f_width+'" height="'+f_height+'" frameborder="0"        webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),o=$("#"+e),a=30;o.hasClass("inline_jwplayer")&&(a=0),o.css({width:f_width,height:f_height,"padding-top":a}).append(i)}(s,o);break;case"youtube":!function(e,t,n){void 0===n&&(n=0),!0===n&&(n=1);var i="100%",o=t.split("?v=")[1];o||(o=t.split("/v/")[1]);var a=$('<iframe id="ytplayer" type="text/html" width="100%" height="100%"          src="http://www.youtube.com/embed/'+o+"?autoplay="+n+"&origin="+PUBLITZER.site_url+'"          frameborder="0" style="position: absolute;" webkitallowfullscreen mozallowfullscreen allowfullscreen ></iframe>'),s=$("#"+e),l=0;s.hasClass("inline_jwplayer")&&(l=0),s.html("").css({display:"block",position:"relative",height:"0",width:i,"padding-top":l,"padding-bottom":"56.25%","margin-bottom":"20px"}).append(a)}(s,o,n);break;default:!function(e,t,n,i){jwplayer.key="g1st/18c6koHgHREMSYddDH3sd3cb7eWu8V+4Q==";var o="",a="16:9";"video"==e&&(a="16:9",o=""),$("body").data("bodyextrainfo","no_preroll")&&(o=""),jwplayer(e).setup({width:"100%",file:t,image:n,aspectratio:a,skin:"beelden",autostart:i,ga:{},advertising:{client:"vast",tag:o,admessage:"Nastavak videa za XX sekundi.",skipoffset:"10",skipmessage:"Skip in xx s",skiptext:"Skip"}}),i&&setTimeout((function(){jwplayer(e).play(!0)}),300),jwplayer().onPlay((function(e){})),jwplayer().onComplete((function(e){}))}(s,o,a,n)}}}$(".js_articleVideoPlayer").on("click",(function(e){r($(this),e,!0)})),n=$(".article__text"),i=!1,o=!1,$(window).scroll($.throttle(500,(function(){t=$("#inline_preroll_player"),e=jwplayer("inline_preroll_player"),o=!0,t.length>0&&(t.inView()?!1===i&&e.play(!0):e.pause(!0))}))),setInterval((function(){o&&(o=!1)}),100),setTimeout((function(){n.height()>=1e3&&(n.append('                    <div id="inline_preroll_player_container" style="position: relative; width:100%; height:0px; visibility:hidden; transition: height 0.5s; overflow: hidden;" href="#">                        <div id="inline_preroll_player" style="position: absolute; width: 100%; height: 100%;"></div>                    </div>                '),jwplayer("inline_preroll_player").setup({file:"/static/video/blank_video.mp4",width:"100%",height:"100%",skin:"glow",autostart:!1,mute:!0,ga:{},advertising:{client:"vast",tag:"",admessage:"Nastavak videa za XX sekundi.",skipoffset:"10",skipmessage:"Skip in xx s",skiptext:"Skip"}}),jwplayer().onAdImpression((function(e){$("#inline_preroll_player_container").css({visibility:"visible","padding-bottom":"56.3%","margin-bottom":"20px"}),$("#inline_preroll_player").css({position:"absolute"})})),jwplayer().onAdComplete((function(){$("#inline_preroll_player_container").css({height:"0px"}),i=!0})),jwplayer().onAdError((function(){console.log("onAdError"),$("#inline_preroll_player_container").css({height:"0px"}),i=!0})),jwplayer().onAdSkipped((function(){$("#inline_preroll_player_container").css({height:"0px"}),i=!0})),jwplayer().onAdClick((function(){})))}),1500),a=$(".js_SpecialBoxVideoPlayer"),s=0,a.length&&$(".js_SpecialBoxVideoPlayerTrigger").on("click",(function(e){e.preventDefault(),0===s&&($(this).find(".gallerybtn--play").remove(),r(a,"",!0)),s=1})),l=$("#article_content").find(".main_gutter").data("video-placement-id"),$(".inline_jwplayer").length&&$(".inline_jwplayer").show().each((function(){var e=$(this);e.addClass("inlinePlayerInitFN"),"CDN"==c(e.data("href"))?(e.attr("data-placement-id",l),e.find("> span").remove().end().wrap('<div class="responsive_inline_container" id="container_'+e.attr("id")+'">').wrap("<div>"),r(e,""),function(e,t){if(!1!==$("#article_content .main_gutter").data("videoautoplay")){$("#"+t).offset();var n=jwplayer(e.attr("id")),i=!1;e.addClass("autoplay_init"),n.setVolume(33),n.onSeek((function(){i=!0})),n.onVolume((function(){i=!0})),n.onDisplayClick((function(){i=!0})),$(window).scroll($.throttle(500,(function(){i||($("#"+t).inView()?n.play(!0):n.pause(!0))})))}}(e,"container_"+e.attr("id"))):r(e,"")})),r($(".js_startArticleVideo"),"",!0)})),$((function(){$(".article__content a[href^='http']").attr("target","_blank"),$(".js_articleCorrect").magnificPopup({modal:!0,items:{src:"#article_correction",type:"inline",midClick:!0},callbacks:{open:function(){var e,t,n,i,o,a,s,l;$(".js_modalClose").addClass("js_modalCloseFN"),$(".js_modalClose").on("click",(function(e){$("body").hasClass("standalone_modal")||$("body").hasClass("modal--standalone")||(e.preventDefault(),$.magnificPopup.instance.close())})),e=$(".js_articleCorrect"),t=$(".js_articleText"),n=$(".js_sendCorrectedArticle"),i=e.data("m_error"),o=e.data("m_meta-app-name"),a=e.data("m_meta-model-name"),s=e.data("m_meta-pk"),l=e.data("m_meta-article-title"),n.on("click",(function(n){n.preventDefault(),0!==t.val().length&&$.ajax({type:"POST",url:e.data("url"),data:{title:l,correction:t.val(),model:a,app:o,pk:s},success:function(e){$(".mfp-content .js_modalTitle").text("Članak uspješno prijavljen"),$(".mfp-content .js_articleText").slideUp(),setTimeout((function(){$.magnificPopup.instance.close()}),3e3)},statusCode:{201:function(){},403:function(){$(".mfp-content .js_modalTitle").text(i).css("color","#F00"),$(".mfp-content .js_articleText").slideUp()},408:function(){},409:function(){$(".mfp-content .js_modalTitle").text(i).css("color","#F00"),$(".mfp-content .js_articleText").slideUp()},500:function(){},502:function(){}}})}))}}})}));
//# sourceMappingURL=article.js.map